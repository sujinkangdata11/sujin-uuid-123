<div class="search-with-random">
    <button class="random-dice-btn" id="randomDiceBtn" title="ëœë¤ ì´ëª¨ì§€">ğŸ² ëœë¤</button>
    <input type="text" class="search-box" placeholder="ì´ëª¨ì§€ë‚˜ ì„¤ëª… ê²€ìƒ‰..." id="descriptionSearchInput">
</div>

<!-- ì´ëª¨ì§€ ì„¤ëª… ëª©ë¡ -->
<div class="emoji-descriptions" id="emojiDescriptions">
    <!-- JavaScriptë¡œ ë™ì  ìƒì„± -->
</div>

<!-- í•˜ë‹¨ ê´‘ê³  -->
<div class="bottom-ad">
    ê´‘ê³  ì˜ì—­ - í•˜ë‹¨ ë°°ë„ˆ
</div>

<style>
/* ì´ëª¨ì§€ í˜ì´ì§€ì™€ ë™ì¼í•œ ê²€ìƒ‰ë°•ìŠ¤ì™€ ì¹´í…Œê³ ë¦¬ íƒ­ ìŠ¤íƒ€ì¼ ì‚¬ìš© */

.search-with-random {
    display: flex;
    gap: 10px;
    margin-bottom: 30px;
    align-items: center;
}

.search-with-random .search-box {
    flex: 1;
    margin-bottom: 0;
}

.random-dice-btn {
    background: #f8f9fa;
    color: #666;
    border: 2px solid #e9ecef;
    font-size: 16px;
    cursor: pointer;
    padding: 12px 16px;
    border-radius: 25px;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    height: 54px;
    line-height: 1;
    flex-shrink: 0;
    white-space: nowrap;
    font-weight: 500;
}

.random-dice-btn:hover {
    background: #e9ecef;
    border-color: #007bff;
}

.random-dice-btn:active {
    transform: scale(0.95);
}

.random-dice-btn.spinning {
    animation: spin 0.5s ease-in-out;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

.emoji-descriptions {
    display: grid;
    gap: 15px;
}

.emoji-desc-item {
    background: white;
    border: 1px solid #e9ecef;
    border-radius: 12px;
    padding: 20px;
    transition: all 0.3s ease;
    cursor: pointer;
}

.emoji-desc-item:hover {
    border-color: #007bff;
    box-shadow: 0 4px 12px rgba(0,123,255,0.1);
    transform: translateY(-2px);
}

.emoji-desc-header {
    display: flex;
    align-items: center;
    gap: 15px;
    margin-bottom: 10px;
}

.emoji-large {
    font-size: 36px;
    flex-shrink: 0;
    padding: 8px;
    background: #f8f9fa;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    min-width: 52px;
    min-height: 52px;
}

.emoji-info {
    flex: 1;
}

.emoji-name {
    font-size: 18px;
    font-weight: 600;
    color: #333;
    margin-bottom: 4px;
}

.emoji-description {
    color: #666;
    font-size: 14px;
    line-height: 1.5;
    margin-bottom: 8px;
}

.emoji-usage {
    font-size: 13px;
    color: #999;
    font-style: italic;
}

.emoji-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin-top: 12px;
}

.emoji-tag {
    background: #f1f3f5;
    color: #495057;
    padding: 4px 8px;
    border-radius: 12px;
    font-size: 12px;
    font-weight: 500;
}

.copy-indicator {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(40, 167, 69, 0.9);
    color: white;
    padding: 8px 16px;
    border-radius: 6px;
    font-size: 14px;
    font-weight: 600;
    opacity: 0;
    transition: opacity 0.3s ease;
    pointer-events: none;
    z-index: 10;
}

.emoji-desc-item {
    position: relative;
}

.emoji-desc-item.copied .copy-indicator {
    opacity: 1;
}

@media (max-width: 768px) {
    .search-with-random {
        gap: 8px;
    }
    
    .random-dice-btn {
        font-size: 14px;
        padding: 10px 12px;
        height: 46px;
        gap: 4px;
    }
    
    /* ê²€ìƒ‰ ê²°ê³¼ ê°œìˆ˜ ì•Œë¦¼ ëª¨ë°”ì¼ ìŠ¤íƒ€ì¼ */
    .search-result-notice {
        font-size: 16px;
        padding: 8px 12px;
        margin-bottom: 15px;
    }
    
    /* ê²€ìƒ‰ êµ¬ë¶„ì„  ëª¨ë°”ì¼ ìŠ¤íƒ€ì¼ */
    .search-divider {
        font-size: 14px;
        margin: 25px 0 15px 0;
    }
    
    /* ì´ëª¨ì§€ ì¹´ë“œ ì»¨í…Œì´ë„ˆ ëª¨ë°”ì¼ ìŠ¤íƒ€ì¼ */
    .emoji-card-container {
        flex-direction: column;
        align-items: center;
        gap: 20px;
        padding: 15px;
    }
    
    .emoji-info-box {
        min-width: auto;
        width: 100%;
        max-width: 350px;
        padding: 15px;
    }
    
    .emoji-info-box p {
        font-size: 14px;
    }
    
    .emoji-info-header strong {
        font-size: 22px;
    }
    
    /* ê²€ìƒ‰ ê²°ê³¼ ê·¸ë¦¬ë“œ ëª¨ë°”ì¼ ìŠ¤íƒ€ì¼ - 2ê°œì”© ê°€ë¡œ ë‚˜ì—´ */
    .search-results-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 15px;
        padding: 15px 0;
    }
    
    .small-emoji-box {
        width: 160px;
        height: 160px;
    }
    
    .small-emoji-display {
        font-size: 40px;
        margin-bottom: 10px;
    }
    
    .small-emoji-title {
        font-size: 12px;
        margin-bottom: 3px;
    }
    
    .small-emoji-subtitle {
        font-size: 10px;
        margin-bottom: 3px;
    }
    
    .small-emoji-category {
        font-size: 9px;
        margin-bottom: 2px;
    }
    
    .small-copy-hint {
        font-size: 8px;
    }
    
    .emoji-desc-item {
        padding: 15px;
    }
    
    .emoji-large {
        font-size: 28px;
        min-width: 44px;
        min-height: 44px;
    }
    
    .emoji-name {
        font-size: 16px;
    }
    
    .emoji-description {
        font-size: 13px;
    }
    
    .emoji-usage {
        font-size: 12px;
    }
}

@media (max-width: 480px) {
    .search-with-random {
        gap: 6px;
    }
    
    .random-dice-btn {
        font-size: 13px;
        padding: 8px 10px;
        height: 42px;
        gap: 3px;
    }
    
    /* ê²€ìƒ‰ ê²°ê³¼ ê·¸ë¦¬ë“œ ì‘ì€ ëª¨ë°”ì¼ ìŠ¤íƒ€ì¼ - 1ê°œì”© ì„¸ë¡œ ë‚˜ì—´ */
    .search-results-grid {
        grid-template-columns: 1fr;
        gap: 12px;
        padding: 12px 0;
    }
    
    .small-emoji-box {
        width: 140px;
        height: 140px;
    }
    
    .small-emoji-display {
        font-size: 35px;
        margin-bottom: 8px;
    }
    
    .small-emoji-title {
        font-size: 11px;
        margin-bottom: 2px;
    }
    
    .small-emoji-subtitle {
        font-size: 9px;
        margin-bottom: 2px;
    }
    
    .small-emoji-category {
        font-size: 8px;
        margin-bottom: 1px;
    }
    
    .small-copy-hint {
        font-size: 7px;
    }
    
    /* ì´ëª¨ì§€ ì¹´ë“œ ì»¨í…Œì´ë„ˆ ì‘ì€ ëª¨ë°”ì¼ ìŠ¤íƒ€ì¼ */
    .emoji-card-container {
        gap: 15px;
        padding: 12px;
    }
    
    .emoji-info-box {
        max-width: 300px;
        padding: 12px;
    }
    
    .emoji-info-box p {
        font-size: 13px;
    }
    
    .emoji-info-header strong {
        font-size: 20px;
    }
    
    .emoji-desc-header {
        gap: 12px;
    }
    
    .emoji-large {
        font-size: 24px;
        min-width: 40px;
        min-height: 40px;
    }
    
    .emoji-name {
        font-size: 15px;
    }
}

/* ê²€ìƒ‰ ê²°ê³¼ ê°œìˆ˜ ì•Œë¦¼ ìŠ¤íƒ€ì¼ */
.search-result-notice {
    background: white;
    color: #333;
    padding: 10px 15px;
    text-align: center;
    font-size: 18px;
    margin-bottom: 20px;
}

/* ê²€ìƒ‰ ê²°ê³¼ êµ¬ë¶„ì„  ìŠ¤íƒ€ì¼ */
.search-divider {
    text-align: center;
    font-size: 16px;
    color: #666;
    margin: 30px 0 20px 0;
    position: relative;
    padding: 0 20px;
}

.search-divider::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 0;
    right: 0;
    height: 1px;
    background: #ddd;
    z-index: 1;
}

.search-divider strong {
    background: white;
    padding: 0 15px;
    position: relative;
    z-index: 2;
}

/* ê²€ìƒ‰ ê²°ê³¼ ê·¸ë¦¬ë“œ ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ - 3ê°œì”© ê°€ë¡œ ë‚˜ì—´ */
.search-results-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 20px;
    padding: 20px 0;
    max-width: 1000px;
    margin: 0 auto;
}

/* ì‘ì€ ì´ëª¨ì§€ ë°•ìŠ¤ ìŠ¤íƒ€ì¼ (3ê°œì”© ë“¤ì–´ê°ˆ ìˆ˜ ìˆëŠ” í¬ê¸°) */
.small-emoji-box {
    width: 200px;
    height: 200px;
    background: #f8f9fa;
    border: 2px solid #e9ecef;
    border-radius: 16px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    margin: 0 auto;
}

.small-emoji-box:hover {
    transform: translateY(-3px);
    background: #e9ecef;
    border-color: #007bff;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
}

.small-emoji-display {
    font-size: 50px;
    line-height: 1;
    margin-bottom: 12px;
    text-align: center;
    filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.1));
}

.small-emoji-text {
    text-align: center;
    color: #333;
}

.small-emoji-title {
    font-size: 14px;
    font-weight: 700;
    margin-bottom: 4px;
    color: #333;
}

.small-emoji-subtitle {
    font-size: 11px;
    color: #666;
    font-weight: 500;
    margin-bottom: 4px;
    line-height: 1.3;
}

.small-emoji-category {
    font-size: 10px;
    color: #007bff;
    font-weight: 500;
    margin-bottom: 2px;
    opacity: 0.9;
}

.small-copy-hint {
    font-size: 9px;
    color: #999;
    font-weight: 400;
    opacity: 0.8;
}

.small-emoji-box.copied .copy-indicator {
    opacity: 1;
}

/* ì´ëª¨ì§€ ì¹´ë“œ ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ - ê°€ë¡œ ë°°ì¹˜ */
.emoji-card-container {
    display: flex;
    justify-content: center;
    align-items: flex-start;
    gap: 30px;
    padding: 20px;
    max-width: 1200px;
    margin: 0 auto;
}

/* ëœë¤ ì´ëª¨ì§€ ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ (í•˜ìœ„ í˜¸í™˜ì„±) */
.random-emoji-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 20px;
    padding: 20px;
}

/* í¥ë¯¸ë¡œìš´ ì‚¬ì‹¤ ë°•ìŠ¤ ìŠ¤íƒ€ì¼ */
.emoji-info-box {
    background: #f1f3f5;
    border-radius: 16px;
    padding: 20px;
    max-width: 400px;
    min-width: 300px;
}

.emoji-info-header {
    margin-bottom: 15px;
    padding-bottom: 12px;
    border-bottom: 2px solid #e9ecef;
}

.emoji-info-header strong {
    font-size: 22px;
    font-weight: 700;
    color: #333;
}

.emoji-info-box p {
    margin: 0 0 12px 0;
    font-size: 15px;
    line-height: 1.6;
    color: #333;
}

.emoji-info-box p:last-child {
    margin-bottom: 0;
    color: #007bff;
    font-weight: 500;
}

.random-emoji-box {
    width: 300px;
    height: 300px;
    background: #f8f9fa;
    border: 2px solid #e9ecef;
    border-radius: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.random-emoji-box:hover {
    transform: translateY(-3px);
    background: #e9ecef;
    border-color: #007bff;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
}

.random-emoji-display {
    font-size: 80px;
    line-height: 1;
    margin-bottom: 20px;
    text-align: center;
    filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.1));
}

.random-emoji-text {
    text-align: center;
    color: #333;
}

.random-title {
    font-size: 20px;
    font-weight: 700;
    margin-bottom: 8px;
    color: #333;
}

.random-subtitle {
    font-size: 14px;
    color: #666;
    font-weight: 500;
    margin-bottom: 8px;
    line-height: 1.4;
}

.random-category {
    font-size: 12px;
    color: #007bff;
    font-weight: 500;
    margin-bottom: 4px;
    opacity: 0.9;
}

.random-copy-hint {
    font-size: 12px;
    color: #999;
    font-weight: 400;
    opacity: 0.8;
}

.random-info {
    text-align: center;
    color: #666;
    max-width: 400px;
    line-height: 1.6;
}

.random-info p {
    margin: 0 0 10px 0;
    font-size: 15px;
}

.random-info p:last-child {
    margin-bottom: 0;
    color: #007bff;
    font-weight: 500;
}

.copy-indicator {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(40, 167, 69, 0.95);
    color: white;
    padding: 12px 20px;
    border-radius: 8px;
    font-size: 16px;
    font-weight: 600;
    opacity: 0;
    transition: opacity 0.3s ease;
    pointer-events: none;
    z-index: 10;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

.random-emoji-box.copied .copy-indicator {
    opacity: 1;
}

@media (max-width: 768px) {
    .random-emoji-box {
        width: 250px;
        height: 250px;
    }
    
    .random-emoji-display {
        font-size: 65px;
        margin-bottom: 15px;
    }
    
    .random-title {
        font-size: 18px;
    }
    
    .random-subtitle {
        font-size: 13px;
    }
    
    .random-info p {
        font-size: 14px;
    }
}

@media (max-width: 480px) {
    .random-emoji-container {
        padding: 15px;
        gap: 15px;
    }
    
    .random-emoji-box {
        width: 200px;
        height: 200px;
        border-radius: 15px;
    }
    
    .random-emoji-display {
        font-size: 50px;
        margin-bottom: 12px;
    }
    
    .random-title {
        font-size: 16px;
        margin-bottom: 6px;
    }
    
    .random-subtitle {
        font-size: 12px;
    }
    
    .random-info {
        max-width: 300px;
    }
    
    .random-info p {
        font-size: 13px;
    }
}
</style>

<script>
// ì´ëª¨ì§€ ì„¤ëª… ë°ì´í„°
const emojiDescriptionData = {
    popular: [
        {emoji: 'ğŸ˜€', name: 'í™œì§ ì›ƒëŠ” ì–¼êµ´', description: 'ê¸°ì˜ê³  í–‰ë³µí•œ ê¸°ë¶„ì„ í‘œí˜„í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ê¸°ë³¸ì ì¸ ì›ƒëŠ” ì´ëª¨ì§€ì…ë‹ˆë‹¤.', usage: 'ì¢‹ì€ ì†Œì‹ì´ë‚˜ ê¸°ìœ ì¼ì´ ìˆì„ ë•Œ', tags: ['ì›ƒìŒ', 'í–‰ë³µ', 'ê¸°ì¨', 'ê¸ì •']},
        {emoji: 'ğŸ˜‚', name: 'ê¸°ì¨ì˜ ëˆˆë¬¼', description: 'ë„ˆë¬´ ì›ƒê²¨ì„œ ëˆˆë¬¼ì´ ë‚  ì •ë„ë¡œ ì›ƒì„ ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.', usage: 'ë§¤ìš° ì¬ë¯¸ìˆëŠ” ìƒí™©ì´ë‚˜ ë†ë‹´ì—', tags: ['ì›ƒìŒ', 'ì¬ë°ŒìŒ', 'ëˆˆë¬¼', 'ê·¹ì›ƒ']},
        {emoji: 'â¤ï¸', name: 'ë¹¨ê°„ í•˜íŠ¸', description: 'ì‚¬ë‘ê³¼ ì• ì •ì„ í‘œí˜„í•˜ëŠ” ê°€ì¥ ê¸°ë³¸ì ì¸ í•˜íŠ¸ ì´ëª¨ì§€ì…ë‹ˆë‹¤.', usage: 'ì‚¬ë‘í•˜ëŠ” ì‚¬ëŒì—ê²Œ ë§ˆìŒì„ ì „í•  ë•Œ', tags: ['ì‚¬ë‘', 'ì• ì •', 'í•˜íŠ¸', 'ë¡œë§¨ìŠ¤']},
        {emoji: 'ğŸ‘', name: 'ì¢‹ì•„ìš”', description: 'ë™ì˜í•˜ê±°ë‚˜ ê¸ì •ì ì¸ ë°˜ì‘ì„ í‘œí˜„í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.', usage: 'ëˆ„êµ°ê°€ì˜ ì˜ê²¬ì— ë™ì˜í•˜ê±°ë‚˜ ê²©ë ¤í•  ë•Œ', tags: ['ì¢‹ìŒ', 'ë™ì˜', 'ê¸ì •', 'ê²©ë ¤']},
        {emoji: 'ğŸ”¥', name: 'ë¶ˆê½ƒ', description: 'ëœ¨ê±°ìš´ ê´€ì‹¬ì´ë‚˜ ì¸ê¸°, ë©‹ì§„ ê²ƒì„ í‘œí˜„í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.', usage: 'íŠ¸ë Œë””í•˜ê±°ë‚˜ ì¸ê¸° ìˆëŠ” ê²ƒì„ ê°•ì¡°í•  ë•Œ', tags: ['í•«', 'ì¸ê¸°', 'ë©‹ì§', 'íŠ¸ë Œë“œ']},
    ],
    people: [
        {emoji: 'ğŸ˜Š', name: 'ë¯¸ì†Œ ì§“ëŠ” ì–¼êµ´', description: 'ë¶€ë“œëŸ½ê³  ì˜¨í™”í•œ ë¯¸ì†Œë¥¼ í‘œí˜„í•˜ëŠ” ì´ëª¨ì§€ì…ë‹ˆë‹¤.', usage: 'ì¹œê·¼í•¨ì´ë‚˜ ê°ì‚¬í•¨ì„ í‘œí˜„í•  ë•Œ', tags: ['ë¯¸ì†Œ', 'ì¹œê·¼', 'ì˜¨í™”', 'ê°ì‚¬']},
        {emoji: 'ğŸ˜', name: 'í•˜íŠ¸ ëˆˆ', description: 'ë¬´ì–¸ê°€ì— ë°˜í–ˆê±°ë‚˜ ë§¤ìš° ì¢‹ì•„í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.', usage: 'ì¢‹ì•„í•˜ëŠ” ê²ƒì„ ë³´ê±°ë‚˜ ë°˜í–ˆì„ ë•Œ', tags: ['ë°˜í•¨', 'ì¢‹ì•„í•¨', 'ì‚¬ë‘', 'ë§¤ë ¥']},
        {emoji: 'ğŸ˜­', name: 'í° ì†Œë¦¬ë¡œ ìš°ëŠ” ì–¼êµ´', description: 'ë§¤ìš° ìŠ¬í”„ê±°ë‚˜ ê°ë™ë°›ì•˜ì„ ë•Œ ì‚¬ìš©í•˜ëŠ” ì´ëª¨ì§€ì…ë‹ˆë‹¤.', usage: 'ë§¤ìš° ìŠ¬í”ˆ ìƒí™©ì´ë‚˜ ê°ë™ì ì¸ ìˆœê°„ì—', tags: ['ìš¸ìŒ', 'ìŠ¬í””', 'ê°ë™', 'ëˆˆë¬¼']},
        {emoji: 'ğŸ˜´', name: 'ì ìëŠ” ì–¼êµ´', description: 'ì¡¸ë¦¬ê±°ë‚˜ ì ë“¤ì—ˆì„ ë•Œ ì‚¬ìš©í•˜ëŠ” ì´ëª¨ì§€ì…ë‹ˆë‹¤.', usage: 'ì ì´ ì˜¬ ë•Œë‚˜ ì§€ì³¤ì„ ë•Œ', tags: ['ì ', 'ì¡¸ë¦¼', 'í”¼ê³¤', 'ìˆ˜ë©´']},
    ],
    nature: [
        {emoji: 'ğŸ¶', name: 'ê°•ì•„ì§€ ì–¼êµ´', description: 'ê·€ì—½ê³  ì¶©ì„±ìŠ¤ëŸ¬ìš´ ê°•ì•„ì§€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì´ëª¨ì§€ì…ë‹ˆë‹¤.', usage: 'ì• ì™„ë™ë¬¼ì´ë‚˜ ê·€ì—¬ìš´ ê²ƒì„ í‘œí˜„í•  ë•Œ', tags: ['ê°•ì•„ì§€', 'ê·€ì—¬ì›€', 'ì• ì™„ë™ë¬¼', 'ì¶©ì„±']},
        {emoji: 'ğŸŒ¸', name: 'ë²šê½ƒ', description: 'ë´„ê³¼ ì•„ë¦„ë‹¤ì›€ì„ ìƒì§•í•˜ëŠ” ë²šê½ƒ ì´ëª¨ì§€ì…ë‹ˆë‹¤.', usage: 'ë´„ì² ì´ë‚˜ ì•„ë¦„ë‹¤ìš´ ìˆœê°„ì„ í‘œí˜„í•  ë•Œ', tags: ['ë´„', 'ê½ƒ', 'ì•„ë¦„ë‹¤ì›€', 'ê³„ì ˆ']},
        {emoji: 'ğŸŒŸ', name: 'ë³„', description: 'íŠ¹ë³„í•¨ì´ë‚˜ ìš°ìˆ˜í•¨ì„ ë‚˜íƒ€ë‚´ëŠ” ë³„ ëª¨ì–‘ ì´ëª¨ì§€ì…ë‹ˆë‹¤.', usage: 'ë­”ê°€ íŠ¹ë³„í•˜ê±°ë‚˜ í›Œë¥­í•  ë•Œ', tags: ['íŠ¹ë³„', 'ë³„', 'ìš°ìˆ˜', 'ë°˜ì§']},
    ],
    food: [
        {emoji: 'ğŸ•', name: 'í”¼ì', description: 'ì¸ê¸° ìˆëŠ” íŒ¨ìŠ¤íŠ¸í‘¸ë“œì¸ í”¼ìë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì´ëª¨ì§€ì…ë‹ˆë‹¤.', usage: 'ìŒì‹ ì–˜ê¸°ë‚˜ íŒŒí‹° ë¶„ìœ„ê¸°ë¥¼ ì—°ì¶œí•  ë•Œ', tags: ['í”¼ì', 'ìŒì‹', 'íŒŒí‹°', 'ë§›ìˆìŒ']},
        {emoji: 'ğŸ°', name: 'ì¼€ì´í¬', description: 'ìƒì¼ì´ë‚˜ ì¶•í•˜í•  ì¼ì´ ìˆì„ ë•Œ ì‚¬ìš©í•˜ëŠ” ì¼€ì´í¬ ì´ëª¨ì§€ì…ë‹ˆë‹¤.', usage: 'ìƒì¼ì´ë‚˜ ê¸°ë…ì¼ ì¶•í•˜í•  ë•Œ', tags: ['ì¼€ì´í¬', 'ìƒì¼', 'ì¶•í•˜', 'ë‹¬ì½¤']},
        {emoji: 'â˜•', name: 'ì»¤í”¼', description: 'ì»¤í”¼ë‚˜ ë”°ëœ»í•œ ìŒë£Œë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì´ëª¨ì§€ì…ë‹ˆë‹¤.', usage: 'ì•„ì¹¨ì´ë‚˜ íœ´ì‹ ì‹œê°„ì„ í‘œí˜„í•  ë•Œ', tags: ['ì»¤í”¼', 'ì•„ì¹¨', 'íœ´ì‹', 'ë”°ëœ»']},
    ],
    symbols: [
        {emoji: 'âœ¨', name: 'ë°˜ì§ì„', description: 'ë§ˆë²•ê°™ê±°ë‚˜ íŠ¹ë³„í•œ ìˆœê°„ì„ í‘œí˜„í•˜ëŠ” ë°˜ì§ì´ëŠ” ë³„ë“¤ì…ë‹ˆë‹¤.', usage: 'ë­”ê°€ ë§ˆë²•ê°™ê±°ë‚˜ íŠ¹ë³„í•  ë•Œ', tags: ['ë°˜ì§', 'ë§ˆë²•', 'íŠ¹ë³„', 'ë¹›']},
        {emoji: 'ğŸ’¯', name: 'ë°±ì ', description: 'ì™„ë²½í•˜ê±°ë‚˜ ìµœê³ ì„ì„ í‘œí˜„í•˜ëŠ” 100ì  ì´ëª¨ì§€ì…ë‹ˆë‹¤.', usage: 'ì™„ë²½í•˜ê±°ë‚˜ ìµœê³ ì˜ ê²°ê³¼ë¥¼ ì–»ì—ˆì„ ë•Œ', tags: ['ì™„ë²½', 'ìµœê³ ', '100ì ', 'ì„±ê³µ']},
        {emoji: 'ğŸ‰', name: 'íŒŒí‹° í¬ë˜ì»¤', description: 'ì¶•í•˜í•˜ê±°ë‚˜ íŒŒí‹° ë¶„ìœ„ê¸°ë¥¼ ì—°ì¶œí•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.', usage: 'ì„±ê³µì´ë‚˜ ì¢‹ì€ ì¼ì„ ì¶•í•˜í•  ë•Œ', tags: ['ì¶•í•˜', 'íŒŒí‹°', 'ì„±ê³µ', 'ê¸°ë…']},
    ]
};

class DescriptionManager {
    constructor() {
        this.allDescriptions = this.getAllDescriptions();
        this.init();
    }

    init() {
        this.bindEvents();
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ìœ¼ë¡œ ëœë¤ ì´ëª¨ì§€ í‘œì‹œ
        this.handleRandomClick();
    }

    bindEvents() {
        console.log('ì´ë²¤íŠ¸ ë°”ì¸ë”© ì‹œì‘');
        
        // ê²€ìƒ‰ ê¸°ëŠ¥
        const searchInput = document.getElementById('descriptionSearchInput');
        console.log('ê²€ìƒ‰ ì…ë ¥ì°½:', searchInput);
        if (searchInput) {
            searchInput.addEventListener('input', (e) => {
                this.handleSearch(e.target.value);
            });
        }

        // ëœë¤ ì£¼ì‚¬ìœ„ ë²„íŠ¼
        const randomBtn = document.getElementById('randomDiceBtn');
        console.log('ëœë¤ ë²„íŠ¼:', randomBtn);
        if (randomBtn) {
            console.log('ëœë¤ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€');
            randomBtn.addEventListener('click', (e) => {
                console.log('ëœë¤ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ ë°œìƒ!');
                e.preventDefault();
                this.handleRandomClick();
            });
            
            // ì¶”ê°€ í…ŒìŠ¤íŠ¸ìš© - onclickë„ ì„¤ì •
            randomBtn.onclick = () => {
                console.log('onclickìœ¼ë¡œ ëœë¤ ë²„íŠ¼ í´ë¦­ë¨');
                this.handleRandomClick();
            };
        } else {
            console.error('ëœë¤ ë²„íŠ¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ!');
        }
    }

    getAllDescriptions() {
        const all = [];
        for (const category in emojiDescriptionData) {
            all.push(...emojiDescriptionData[category].map(item => ({...item, category})));
        }
        return all;
    }

    handleSearch(searchTerm) {
        if (!searchTerm.trim()) {
            this.renderDescriptions(this.allDescriptions);
            return;
        }

        const filtered = this.allDescriptions.filter(item => {
            const searchLower = searchTerm.toLowerCase();
            return item.name.toLowerCase().includes(searchLower) ||
                   item.description.toLowerCase().includes(searchLower) ||
                   item.tags.some(tag => tag.toLowerCase().includes(searchLower)) ||
                   item.emoji.includes(searchTerm);
        });

        this.renderDescriptions(filtered, searchTerm);
    }

    handleRandomClick() {
        console.log('ëœë¤ ë²„íŠ¼ í´ë¦­ë¨'); // ë””ë²„ê¹…ìš©
        
        const randomBtn = document.getElementById('randomDiceBtn');
        const searchInput = document.getElementById('descriptionSearchInput');
        
        // ì£¼ì‚¬ìœ„ íšŒì „ ì• ë‹ˆë©”ì´ì…˜
        if (randomBtn) {
            randomBtn.classList.add('spinning');
            setTimeout(() => {
                randomBtn.classList.remove('spinning');
            }, 500);
        }

        // í„°ì¹˜ í”¼ë“œë°±
        if (navigator.vibrate) {
            navigator.vibrate([50, 50, 100]);
        }

        // emoji-data.jsì—ì„œ ëœë¤ ì´ëª¨ì§€ ì„ íƒ
        const randomEmoji = this.getRandomEmojiFromData();
        console.log('ì„ íƒëœ ëœë¤ ì´ëª¨ì§€:', randomEmoji); // ë””ë²„ê¹…ìš©
        
        // ê²€ìƒ‰ì°½ ë¹„ìš°ê¸°
        if (searchInput) {
            searchInput.value = '';
        }
        
        // ëœë¤ ì´ëª¨ì§€ í‘œì‹œ (ì„¤ëª… ì—†ëŠ” í˜•íƒœ)
        this.renderRandomEmoji(randomEmoji);
    }

    getRandomEmojiFromData() {
        console.log('window.emojiData ìƒíƒœ:', window.emojiData); // ë””ë²„ê¹…ìš©
        
        // emoji-data.jsì˜ ëª¨ë“  ì´ëª¨ì§€ë¥¼ í•˜ë‚˜ì˜ ë°°ì—´ë¡œ í•©ì¹˜ê¸°
        if (!window.emojiData) {
            console.log('emoji-data.js ì—†ìŒ, ê¸°ë³¸ ë°ì´í„° ì‚¬ìš©');
            // emoji-data.jsê°€ ë¡œë“œë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ ë°ì´í„° ì‚¬ìš©
            const randomIndex = Math.floor(Math.random() * this.allDescriptions.length);
            return this.allDescriptions[randomIndex].emoji;
        }

        const allEmojis = [];
        for (const category in window.emojiData) {
            allEmojis.push(...window.emojiData[category]);
        }

        console.log('ì „ì²´ ì´ëª¨ì§€ ê°œìˆ˜:', allEmojis.length); // ë””ë²„ê¹…ìš©

        // ëœë¤ ì„ íƒ
        const randomIndex = Math.floor(Math.random() * allEmojis.length);
        return allEmojis[randomIndex];
    }

    // ê³µí†µ ì´ëª¨ì§€ ì¹´ë“œ ë Œë”ë§ í•¨ìˆ˜
    renderEmojiCard(emoji, options = {}) {
        const {
            isRandom = false,
            searchTerm = '',
            totalCount = 1,
            showInfo = true,
            title = '',
            subtitle = '',
            category = '',
            infoText = []
        } = options;

        // ì´ëª¨ì§€ í‚¤ì›Œë“œ ì„¤ëª… ê°€ì ¸ì˜¤ê¸°
        const keywords = this.getEmojiDescription(emoji);
        const descriptionText = subtitle || (keywords.length > 0 ? keywords.slice(0, 3).join(' Â· ') : 'ì‹ ë¹„ë¡œìš´ ì´ëª¨ì§€ì…ë‹ˆë‹¤!');
        const mainKeyword = title || (keywords.length > 0 ? keywords[0] : 'íŠ¹ë³„í•œ ì´ëª¨ì§€');
        
        // ì¹´í…Œê³ ë¦¬ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
        const categoryInfo = this.getEmojiCategory(emoji);
        const categoryText = category || `ğŸ“‚ ${categoryInfo.name} ì¹´í…Œê³ ë¦¬`;
        
        // í¥ë¯¸ë¡œìš´ íŒ©íŠ¸ ìƒì„±
        const funFact = this.generateFunFact(emoji, keywords, categoryInfo);

        // ê¸°ë³¸ ì •ë³´ í…ìŠ¤íŠ¸
        let defaultInfoText = [];
        if (isRandom) {
            defaultInfoText = [
                `<p><strong>ğŸ¯ í¥ë¯¸ë¡œìš´ ì‚¬ì‹¤:</strong> ${funFact}</p>`,
                `<p>ì´ ì´ëª¨ì§€ëŠ” ${this.getEmojiCount()}ê°œì˜ ì´ëª¨ì§€ ì¤‘ì—ì„œ ëœë¤ìœ¼ë¡œ ì„ íƒë˜ì—ˆìŠµë‹ˆë‹¤!</p>`,
                `<p>ë‹¤ì‹œ ğŸ² ëœë¤ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ìƒˆë¡œìš´ ì´ëª¨ì§€ë¥¼ ë§Œë‚  ìˆ˜ ìˆì–´ìš”.</p>`
            ];
        } else {
            defaultInfoText = [
                `<p><strong>ğŸ¯ í¥ë¯¸ë¡œìš´ ì‚¬ì‹¤:</strong> ${funFact}</p>`,
                `<p>ì´ ì´ëª¨ì§€ëŠ” "${searchTerm}" ê²€ìƒ‰ì—ì„œ ê°€ì¥ ê´€ë ¨ì„±ì´ ë†’ì€ ê²°ê³¼ì…ë‹ˆë‹¤!</p>`,
                `<p>ì´ <strong>${totalCount}ê°œ</strong>ì˜ ê²€ìƒ‰ ê²°ê³¼ ì¤‘ ì²« ë²ˆì§¸ë¡œ ì„ ì •ë˜ì—ˆì–´ìš”.</p>`
            ];
        }

        const finalInfoText = infoText.length > 0 ? infoText : defaultInfoText;

        return `
            <div class="emoji-card-container">
                <div class="random-emoji-box" onclick="copyEmojiFromDesc('${emoji}', this)">
                    <div class="random-emoji-display">${emoji}</div>
                    <div class="random-emoji-text">
                        <div class="random-title">${isRandom ? 'ğŸ² ' : ''}${mainKeyword}</div>
                        <div class="random-subtitle">${descriptionText}</div>
                        <div class="random-category">${categoryText}</div>
                        <div class="random-copy-hint">í´ë¦­í•´ì„œ ë³µì‚¬í•˜ì„¸ìš”!</div>
                    </div>
                    <div class="copy-indicator">ë³µì‚¬ë¨!</div>
                </div>
                ${showInfo ? `
                    <div class="emoji-info-box">
                        <div class="emoji-info-header">
                            <strong>${emoji} ${mainKeyword} ì´ëª¨ì§€ ì˜ë¯¸Â·ë³µì‚¬</strong>
                        </div>
                        ${finalInfoText.join('')}
                    </div>
                ` : ''}
            </div>
        `;
    }

    renderRandomEmoji(emoji) {
        const container = document.getElementById('emojiDescriptions');
        if (!container) return;

        container.innerHTML = this.renderEmojiCard(emoji, { isRandom: true });
    }
    
    getEmojiCategory(emoji) {
        if (!window.emojiData) {
            return { name: 'ì¼ë°˜', key: 'general' };
        }
        
        const categoryNames = {
            'people': 'ì‚¬ëŒÂ·í‘œì •',
            'hands': 'ì†Â·ì œìŠ¤ì²˜', 
            'races': 'ë‹¤ì–‘ì„±Â·ì¸ì¢…',
            'jobs': 'ì§ì—…Â·ì—­í• ',
            'love': 'ì‚¬ë‘Â·ê°ì •',
            'nature': 'ë™ë¬¼Â·ìì—°',
            'food': 'ìŒì‹Â·ìŒë£Œ',
            'activities': 'í™œë™Â·ìŠ¤í¬ì¸ ',
            'travel': 'ì—¬í–‰Â·êµí†µ',
            'objects': 'ì‚¬ë¬¼Â·ë„êµ¬',
            'symbols': 'ê¸°í˜¸Â·í‘œì‹œ',
            'flags': 'êµ­ê¸°Â·ì§€ì—­'
        };
        
        for (const [key, emojis] of Object.entries(window.emojiData)) {
            if (emojis.includes(emoji)) {
                return {
                    name: categoryNames[key] || key,
                    key: key
                };
            }
        }
        
        return { name: 'ì¼ë°˜', key: 'general' };
    }
    

    generateFunFact(emoji, keywords, categoryInfo) {
        const facts = [];
        
        // ì¹´í…Œê³ ë¦¬ë³„ íŠ¹ë³„í•œ íŒ©íŠ¸
        if (categoryInfo.key === 'people') {
            facts.push('í‘œì • ì´ëª¨ì§€ëŠ” ì „ ì„¸ê³„ì ìœ¼ë¡œ ê°ì •ì„ í‘œí˜„í•˜ëŠ” ê³µí†µ ì–¸ì–´ ì—­í• ì„ í•©ë‹ˆë‹¤.');
            facts.push('ì´ëª¨ì§€ë¡œ ì†Œí†µí•  ë•Œ ì–¸ì–´ ì¥ë²½ì„ ë„˜ì–´ì„œëŠ” íš¨ê³¼ê°€ ìˆì–´ìš”.');
        } else if (categoryInfo.key === 'hands') {
            facts.push('ì† ì œìŠ¤ì²˜ëŠ” ë¬¸í™”ë§ˆë‹¤ ë‹¤ë¥¸ ì˜ë¯¸ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆì–´ í¥ë¯¸ë¡­ìŠµë‹ˆë‹¤.');
            facts.push('í”¼ë¶€í†¤ì´ ë‹¤ì–‘í•œ ì´ëª¨ì§€ë¡œ í¬ìš©ì„±ì„ ë†’ì˜€ìŠµë‹ˆë‹¤.');
        } else if (categoryInfo.key === 'food') {
            facts.push('ìŒì‹ ì´ëª¨ì§€ëŠ” ì „ ì„¸ê³„ì˜ ë‹¤ì–‘í•œ ìš”ë¦¬ ë¬¸í™”ë¥¼ ë°˜ì˜í•©ë‹ˆë‹¤.');
            facts.push('ìŒì‹ ì´ëª¨ì§€ë¡œ ë©”ë‰´ë¥¼ ì£¼ë¬¸í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•´ìš”!');
        } else if (categoryInfo.key === 'nature') {
            facts.push('ìì—° ì´ëª¨ì§€ëŠ” í™˜ê²½ ë³´í˜¸ ë©”ì‹œì§€ë¥¼ ì „ë‹¬í•  ë•Œ íš¨ê³¼ì ì…ë‹ˆë‹¤.');
            facts.push('ë™ë¬¼ ì´ëª¨ì§€ëŠ” ê·€ì—¬ì›€ì„ í‘œí˜„í•˜ëŠ” ëŒ€í‘œì ì¸ ë°©ë²•ì´ì—ìš”.');
        } else if (categoryInfo.key === 'travel') {
            facts.push('ì—¬í–‰ ì´ëª¨ì§€ë¡œ ì „ ì„¸ê³„ ì–´ë””ë“  ë– ë‚˜ëŠ” ê¸°ë¶„ì„ ë‚¼ ìˆ˜ ìˆì–´ìš”.');
            facts.push('êµí†µìˆ˜ë‹¨ ì´ëª¨ì§€ëŠ” ì‹œëŒ€ì˜ ë°œì „ì„ ë³´ì—¬ì£¼ëŠ” íƒ€ì„ìº¡ìŠì…ë‹ˆë‹¤.');
        } else if (categoryInfo.key === 'flags') {
            facts.push('êµ­ê¸° ì´ëª¨ì§€ëŠ” ì „ ì„¸ê³„ 195ê°œ ì´ìƒì˜ êµ­ê°€ë¥¼ í‘œí˜„í•©ë‹ˆë‹¤.');
            facts.push('ì˜¬ë¦¼í”½ì´ë‚˜ ì›”ë“œì»µ ë•Œ êµ­ê¸° ì´ëª¨ì§€ ì‚¬ìš©ëŸ‰ì´ ê¸‰ì¦í•´ìš”.');
        } else if (categoryInfo.key === 'symbols') {
            facts.push('ê¸°í˜¸ ì´ëª¨ì§€ëŠ” ë³µì¡í•œ ê°œë…ì„ ê°„ë‹¨í•˜ê²Œ í‘œí˜„í•˜ëŠ” ë„êµ¬ì…ë‹ˆë‹¤.');
            facts.push('ìˆ˜í•™ ê¸°í˜¸ë¶€í„° ì¢…êµ ìƒì§•ê¹Œì§€ ë‹¤ì–‘í•œ ì˜ë¯¸ë¥¼ ë‹´ê³  ìˆì–´ìš”.');
        } else if (categoryInfo.key === 'activities') {
            facts.push('í™œë™ ì´ëª¨ì§€ë¡œ ì·¨ë¯¸ì™€ ìš´ë™ì„ ê³µìœ í•˜ëŠ” ì¬ë¯¸ë¥¼ ëŠê»´ë³´ì„¸ìš”.');
            facts.push('ìŠ¤í¬ì¸  ì´ëª¨ì§€ëŠ” êµ­ì œ ê²½ê¸° ë•Œ ì‘ì› ë„êµ¬ë¡œ í™œìš©ë©ë‹ˆë‹¤.');
        }
        
        // í‚¤ì›Œë“œ ê¸°ë°˜ íŒ©íŠ¸
        if (keywords.includes('ì‚¬ë‘') || keywords.includes('í•˜íŠ¸')) {
            facts.push('í•˜íŠ¸ ì´ëª¨ì§€ëŠ” SNSì—ì„œ ê°€ì¥ ë§ì´ ì‚¬ìš©ë˜ëŠ” ì´ëª¨ì§€ ì¤‘ í•˜ë‚˜ì˜ˆìš”.');
            facts.push('ë‹¤ì–‘í•œ ìƒ‰ê¹”ì˜ í•˜íŠ¸ëŠ” ê°ê° ë‹¤ë¥¸ ì˜ë¯¸ë¥¼ ê°€ì§€ê³  ìˆì–´ìš”.');
        }
        if (keywords.includes('ì›ƒìŒ') || keywords.includes('ì›ƒëŠ”')) {
            facts.push('ì›ƒëŠ” í‘œì • ì´ëª¨ì§€ëŠ” ê¸ì •ì ì¸ ì—ë„ˆì§€ë¥¼ ì „ë‹¬í•˜ëŠ” ë§ˆë²•ê°™ì€ í˜ì´ ìˆì–´ìš”.');
            facts.push('ì›ƒìŒ ì´ëª¨ì§€ë¥¼ ë³´ë©´ ì‹¤ì œë¡œ ë‡Œì—ì„œ í–‰ë³µ í˜¸ë¥´ëª¬ì´ ë¶„ë¹„ëœë‹¤ê³  í•´ìš”.');
        }
        if (keywords.includes('ìŒì‹') || keywords.includes('ë§›ìˆ')) {
            facts.push('ìŒì‹ ì‚¬ì§„ê³¼ í•¨ê»˜ ì‚¬ìš©í•˜ë©´ ë”ìš± ë§›ìˆì–´ ë³´ì´ëŠ” íš¨ê³¼ê°€ ìˆìŠµë‹ˆë‹¤.');
            facts.push('ìŒì‹ ì´ëª¨ì§€ëŠ” ì…°í”„ë“¤ì´ ë©”ë‰´ë¥¼ ì„¤ëª…í•  ë•Œ ìì£¼ ì‚¬ìš©í•´ìš”.');
        }
        if (keywords.includes('ë™ë¬¼') || keywords.includes('ê³ ì–‘ì´') || keywords.includes('ê°•ì•„ì§€')) {
            facts.push('ë™ë¬¼ ì´ëª¨ì§€ëŠ” í«ìƒµê³¼ ë™ë¬¼ë³´í˜¸ì†Œì—ì„œ í™ë³´ìš©ìœ¼ë¡œ ë§ì´ í™œìš©ë¼ìš”.');
            facts.push('ê·€ì—¬ìš´ ë™ë¬¼ ì´ëª¨ì§€ëŠ” ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ì¤„ì—¬ì£¼ëŠ” íš¨ê³¼ê°€ ìˆë‹¤ê³  ì—°êµ¬ë˜ì—ˆì–´ìš”.');
        }
        
        // ì‹œê°„ëŒ€ë³„ íŠ¹ë³„ íŒ©íŠ¸
        const hour = new Date().getHours();
        if (hour >= 6 && hour < 12) {
            facts.push('ì¢‹ì€ ì•„ì¹¨ì´ì—ìš”! ì•„ì¹¨ì— ì‚¬ìš©í•˜ëŠ” ì´ëª¨ì§€ëŠ” í•˜ë£¨ë¥¼ ê¸ì •ì ìœ¼ë¡œ ì‹œì‘í•˜ê²Œ í•´ì¤˜ìš”.');
        } else if (hour >= 12 && hour < 18) {
            facts.push('ì˜¤í›„ ì‹œê°„ì´ë„¤ìš”! ì´ ì‹œê°„ëŒ€ì—ëŠ” ìŒì‹ê³¼ í™œë™ ì´ëª¨ì§€ê°€ ê°€ì¥ ë§ì´ ì‚¬ìš©ë¼ìš”.');
        } else if (hour >= 18 && hour < 22) {
            facts.push('ì €ë… ì‹œê°„ì´êµ°ìš”! ê°€ì¡±ê³¼ ì¹œêµ¬ë“¤ê³¼ ë‚˜ëˆ„ëŠ” ì´ëª¨ì§€ê°€ ë”ìš± íŠ¹ë³„í•´ìš”.');
        } else {
            facts.push('ë°¤ëŠ¦ì€ ì‹œê°„ì´ë„¤ìš”! ë‹¬ê³¼ ë³„ ì´ëª¨ì§€ë¡œ í¸ì•ˆí•œ ë°¤ì„ í‘œí˜„í•´ë³´ì„¸ìš”.');
        }
        
        // ê³„ì ˆë³„ íŒ©íŠ¸ (í˜„ì¬ ì›” ê¸°ì¤€)
        const month = new Date().getMonth() + 1;
        if (month >= 3 && month <= 5) {
            facts.push('ë´„ì² ì´ë„¤ìš”! ğŸŒ¸ ë²šê½ƒê³¼ ğŸŒ± ìƒˆì‹¹ ì´ëª¨ì§€ê°€ ê°€ì¥ í™œë°œíˆ ì‚¬ìš©ë˜ëŠ” ê³„ì ˆì´ì—ìš”.');
        } else if (month >= 6 && month <= 8) {
            facts.push('ì—¬ë¦„ì² ì…ë‹ˆë‹¤! â˜€ï¸ íƒœì–‘ê³¼ ğŸ–ï¸ í•´ë³€ ì´ëª¨ì§€ë¡œ ì‹œì›í•œ ì—¬ë¦„ì„ í‘œí˜„í•´ë³´ì„¸ìš”.');
        } else if (month >= 9 && month <= 11) {
            facts.push('ê°€ì„ì² ì´êµ°ìš”! ğŸ‚ ë‚™ì—½ê³¼ ğŸƒ í˜¸ë°• ì´ëª¨ì§€ê°€ ì¸ê¸° ìˆëŠ” ì‹œì¦Œì´ì—ìš”.');
        } else {
            facts.push('ê²¨ìš¸ì² ì…ë‹ˆë‹¤! â„ï¸ ëˆˆê³¼ â›„ ëˆˆì‚¬ëŒ ì´ëª¨ì§€ë¡œ ë”°ëœ»í•œ ê²¨ìš¸ì„ ë§Œë“¤ì–´ë³´ì„¸ìš”.');
        }
        
        // ì¼ë°˜ì ì¸ í¥ë¯¸ë¡œìš´ íŒ©íŠ¸ë“¤ (ë” í’ë¶€í•˜ê²Œ)
        facts.push('ì´ëª¨ì§€ëŠ” 1999ë…„ ì¼ë³¸ì˜ ì‹œê²Œíƒ€ì¹´ ì¿ ë¦¬íƒ€ê°€ ìµœì´ˆë¡œ ë§Œë“¤ì–´ì¡ŒìŠµë‹ˆë‹¤.');
        facts.push('ë§¤ë…„ 7ì›” 17ì¼ì€ ì„¸ê³„ ì´ëª¨ì§€ ë°ì´ì…ë‹ˆë‹¤. (ğŸ“… ë‹¬ë ¥ ì´ëª¨ì§€ì—ì„œ ìœ ë˜)');
        facts.push('ì´ëª¨ì§€ëŠ” í˜„ì¬ 3,600ê°œ ì´ìƒì´ ê³µì‹ ë“±ë¡ë˜ì–´ ìˆì–´ìš”.');
        facts.push('ê°€ì¥ ì¸ê¸° ìˆëŠ” ì´ëª¨ì§€ëŠ” "ê¸°ì¨ì˜ ëˆˆë¬¼" ğŸ˜‚ ì…ë‹ˆë‹¤.');
        facts.push('ì´ëª¨ì§€ í•˜ë‚˜í•˜ë‚˜ì—ëŠ” ê³ ìœ í•œ ìœ ë‹ˆì½”ë“œ ë²ˆí˜¸ê°€ ìˆì–´ìš”.');
        facts.push('ì´ëª¨ì§€ëŠ” "ê·¸ë¦¼ ë¬¸ì"ë¼ëŠ” ëœ»ì˜ ì¼ë³¸ì–´ ì—ëª¨ì§€(çµµæ–‡å­—)ì—ì„œ ì™”ì–´ìš”.');
        facts.push('ì˜¥ìŠ¤í¼ë“œ ì‚¬ì „ì€ 2015ë…„ ì˜¬í•´ì˜ ë‹¨ì–´ë¡œ ğŸ˜‚ ì´ëª¨ì§€ë¥¼ ì„ ì •í–ˆì–´ìš”.');
        facts.push('ì „ ì„¸ê³„ì—ì„œ ë§¤ì¼ 50ì–µ ê°œ ì´ìƒì˜ ì´ëª¨ì§€ê°€ ì‚¬ìš©ë˜ê³  ìˆìŠµë‹ˆë‹¤.');
        facts.push('ì´ëª¨ì§€ëŠ” ìœ ë‹ˆì½”ë“œ ì»¨ì†Œì‹œì—„ì—ì„œ ì—„ê²©í•œ ì‹¬ì‚¬ë¥¼ ê±°ì³ ìŠ¹ì¸ë©ë‹ˆë‹¤.');
        facts.push('ìƒˆë¡œìš´ ì´ëª¨ì§€ê°€ ì¶”ê°€ë˜ë ¤ë©´ ìµœì†Œ 2ë…„ì˜ ì‹¬ì‚¬ ê³¼ì •ì„ ê±°ì³ì•¼ í•´ìš”.');
        
        // ëœë¤ìœ¼ë¡œ ì„ íƒ
        return facts[Math.floor(Math.random() * facts.length)];
    }

    getEmojiDescription(emoji) {
        // emojiKeywordsì—ì„œ í•´ë‹¹ ì´ëª¨ì§€ì˜ í‚¤ì›Œë“œ ì„¤ëª… ê°€ì ¸ì˜¤ê¸°
        if (window.emojiKeywords && window.emojiKeywords[emoji]) {
            return window.emojiKeywords[emoji];
        }
        return [];
    }

    getEmojiCount() {
        if (!window.emojiData) return '3000+';
        
        let count = 0;
        for (const category in window.emojiData) {
            count += window.emojiData[category].length;
        }
        return count.toLocaleString();
    }

    renderDescriptions(descriptions, searchTerm = '') {
        const container = document.getElementById('emojiDescriptions');
        if (!container) return;

        if (descriptions.length === 0) {
            container.innerHTML = '<div style="text-align: center; color: #999; padding: 40px;">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</div>';
            return;
        }

        // ê²€ìƒ‰ ê²°ê³¼ ê°œìˆ˜ í‘œì‹œ
        const totalCount = descriptions.length;
        
        // ì²« ë²ˆì§¸ëŠ” ëœë¤ì²˜ëŸ¼ ì¤‘ì•™ì— í¬ê²Œ, ë‚˜ë¨¸ì§€ëŠ” ì•„ë˜ì— 3ê°œì”© ê°€ë¡œ ë‚˜ì—´
        const firstItem = descriptions[0];
        const restItems = descriptions.slice(1);
        
        // ê³µí†µ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ì„œ ì²« ë²ˆì§¸ ì´ëª¨ì§€ ë Œë”ë§
        const firstEmojiCard = this.renderEmojiCard(firstItem.emoji, {
            isRandom: false,
            searchTerm: searchTerm,
            totalCount: totalCount,
            title: firstItem.name,
            subtitle: firstItem.description,
            category: firstItem.usage
        });

        container.innerHTML = `
            <!-- ê²€ìƒ‰ ê²°ê³¼ ê°œìˆ˜ ì•Œë¦¼ -->
            <div class="search-result-notice">
                ê²€ìƒ‰ ê²°ê³¼ <strong>${totalCount}ê°œ</strong>ê°€ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤ âœ¨
            </div>
            
            ${firstEmojiCard}
            
            <!-- ë‚˜ë¨¸ì§€ ì´ëª¨ì§€ë“¤ì€ ì‘ê²Œ í•´ì„œ 3ê°œì”© ê°€ë¡œ ë‚˜ì—´ -->
            ${restItems.length > 0 ? `
                <!-- êµ¬ë¶„ì„  -->
                <div class="search-divider">
                    <strong>ê·¸ ì™¸ ${searchTerm} ê´€ë ¨ ì´ëª¨ì§€</strong>
                </div>
                
                <div class="search-results-grid">
                    ${restItems.map(item => `
                        <div class="small-emoji-box" onclick="copyEmojiFromDesc('${item.emoji}', this)">
                            <div class="small-emoji-display">${item.emoji}</div>
                            <div class="small-emoji-text">
                                <div class="small-emoji-title">${item.name}</div>
                                <div class="small-emoji-subtitle">${item.description}</div>
                                <div class="small-emoji-category">${item.usage}</div>
                                <div class="small-copy-hint">í´ë¦­í•´ì„œ ë³µì‚¬í•˜ì„¸ìš”!</div>
                            </div>
                            <div class="copy-indicator">ë³µì‚¬ë¨!</div>
                        </div>
                    `).join('')}
                </div>
            ` : ''}
        `;
    }
}

// ì´ëª¨ì§€ ë³µì‚¬ í•¨ìˆ˜ (ì „ì—­ìœ¼ë¡œ ë…¸ì¶œ)
window.copyEmojiFromDesc = function(emoji, element) {
    // í„°ì¹˜ í”¼ë“œë°±
    if (navigator.vibrate) {
        navigator.vibrate(50);
    }
    
    navigator.clipboard.writeText(emoji).then(() => {
        // ë³µì‚¬ í‘œì‹œ
        element.classList.add('copied');
        setTimeout(() => {
            element.classList.remove('copied');
        }, 1000);
        
        // í”Œë¡œíŒ… ë°•ìŠ¤ì— ì¶”ê°€
        addToCollectorFromDesc(emoji);
        
        // ì•Œë¦¼ í‘œì‹œ
        showCopyNotificationFromDesc(emoji);
    }).catch(() => {
        // ëŒ€ì²´ ë³µì‚¬ ë°©ë²•
        fallbackCopyTextToClipboard(emoji);
        element.classList.add('copied');
        setTimeout(() => {
            element.classList.remove('copied');
        }, 1000);
        addToCollectorFromDesc(emoji);
        showCopyNotificationFromDesc(emoji);
    });
};

window.addToCollectorFromDesc = function(emoji) {
    const collector = document.getElementById('emojiCollector');
    if (!collector) return;
    
    if (collector.hasAttribute('data-placeholder')) {
        collector.textContent = emoji;
        collector.removeAttribute('data-placeholder');
    } else {
        collector.textContent += emoji;
    }
};

window.showCopyNotificationFromDesc = function(copiedEmoji) {
    const notification = document.getElementById('copyNotification');
    console.log('ì•Œë¦¼ ìš”ì†Œ ì°¾ê¸°:', notification); // ë””ë²„ê¹…
    
    if (!notification) {
        console.error('copyNotification ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!');
        return;
    }
    
    notification.textContent = `ì´ëª¨ì§€ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤! ${copiedEmoji}`;
    notification.classList.add('show');
    console.log('ì•Œë¦¼ í‘œì‹œë¨:', copiedEmoji); // ë””ë²„ê¹…
    
    setTimeout(() => {
        notification.classList.remove('show');
    }, 2000);
};

window.fallbackCopyTextToClipboard = function(text) {
    const textArea = document.createElement("textarea");
    textArea.value = text;
    textArea.style.top = "0";
    textArea.style.left = "0";
    textArea.style.position = "fixed";
    document.body.appendChild(textArea);
    textArea.focus();
    textArea.select();
    
    try {
        document.execCommand('copy');
    } catch (err) {
        console.error('ë³µì‚¬ ì‹¤íŒ¨', err);
    }
    
    document.body.removeChild(textArea);
};

// ì „ì—­ ë³€ìˆ˜ë¡œ ë§¤ë‹ˆì € ì¸ìŠ¤í„´ìŠ¤ ì €ì¥
if (typeof window.descriptionManager === 'undefined') {
    window.descriptionManager = null;
}

// ê¸°ì¡´ ì¸ìŠ¤í„´ìŠ¤ ì •ë¦¬ ë° ìƒˆ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
function initializeDescriptionPage() {
    console.log('ì´ëª¨ì§€ ì„¤ëª… í˜ì´ì§€ ì´ˆê¸°í™” ì‹œì‘');
    
    // ê¸°ì¡´ ì¸ìŠ¤í„´ìŠ¤ê°€ ìˆìœ¼ë©´ ì •ë¦¬
    if (window.descriptionManager) {
        console.log('ê¸°ì¡´ DescriptionManager ì •ë¦¬');
    }
    
    // ìƒˆ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
    window.descriptionManager = new DescriptionManager();
    console.log('ìƒˆ DescriptionManager ìƒì„±ë¨');
}

// ì¦‰ì‹œ ì´ˆê¸°í™”
initializeDescriptionPage();

// ì „ì—­ ëœë¤ í•¨ìˆ˜ (ë°±ì—…ìš©)
window.handleRandomClickGlobal = function() {
    console.log('ì „ì—­ ëœë¤ í•¨ìˆ˜ í˜¸ì¶œë¨');
    if (window.descriptionManager) {
        window.descriptionManager.handleRandomClick();
    } else {
        console.error('DescriptionManagerê°€ ì´ˆê¸°í™”ë˜ì§€ ì•ŠìŒ');
    }
};
</script>