<div class="search-with-random">
    <button class="random-dice-btn" id="randomDiceBtn" title="ëœë¤ ì´ëª¨ì§€">ğŸ² ëœë¤</button>
    <input type="text" class="search-box" placeholder="ì´ëª¨ì§€ë‚˜ ì„¤ëª… ê²€ìƒ‰..." id="descriptionSearchInput">
</div>

<!-- ì´ëª¨ì§€ ì„¤ëª… ëª©ë¡ -->
<div class="emoji-descriptions" id="emojiDescriptions">
    <!-- JavaScriptë¡œ ë™ì  ìƒì„± -->
</div>

<!-- í•˜ë‹¨ ê´‘ê³  -->
<div class="bottom-ad">
    ê´‘ê³  ì˜ì—­ - í•˜ë‹¨ ë°°ë„ˆ
</div>

<style>
/* ì´ëª¨ì§€ í˜ì´ì§€ì™€ ë™ì¼í•œ ê²€ìƒ‰ë°•ìŠ¤ì™€ ì¹´í…Œê³ ë¦¬ íƒ­ ìŠ¤íƒ€ì¼ ì‚¬ìš© */

.search-with-random {
    display: flex;
    gap: 10px;
    margin-bottom: 30px;
    align-items: center;
}

.search-with-random .search-box {
    flex: 1;
    margin-bottom: 0;
}

.random-dice-btn {
    background: #f8f9fa;
    color: #666;
    border: 2px solid #e9ecef;
    font-size: 16px;
    cursor: pointer;
    padding: 12px 16px;
    border-radius: 25px;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    height: 54px;
    line-height: 1;
    flex-shrink: 0;
    white-space: nowrap;
    font-weight: 500;
}

.random-dice-btn:hover {
    background: #e9ecef;
    border-color: #007bff;
}

.random-dice-btn:active {
    transform: scale(0.95);
}

.random-dice-btn.spinning {
    animation: spin 0.5s ease-in-out;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

.emoji-descriptions {
    display: grid;
    gap: 15px;
}

.emoji-desc-item {
    background: white;
    border: 1px solid #e9ecef;
    border-radius: 12px;
    padding: 20px;
    transition: all 0.3s ease;
    cursor: pointer;
}

.emoji-desc-item:hover {
    border-color: #007bff;
    box-shadow: 0 4px 12px rgba(0,123,255,0.1);
    transform: translateY(-2px);
}

.emoji-desc-header {
    display: flex;
    align-items: center;
    gap: 15px;
    margin-bottom: 10px;
}

.emoji-large {
    font-size: 36px;
    flex-shrink: 0;
    padding: 8px;
    background: #f8f9fa;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    min-width: 52px;
    min-height: 52px;
}

.emoji-info {
    flex: 1;
}

.emoji-name {
    font-size: 18px;
    font-weight: 600;
    color: #333;
    margin-bottom: 4px;
}

.emoji-description {
    color: #666;
    font-size: 14px;
    line-height: 1.5;
    margin-bottom: 8px;
}

.emoji-usage {
    font-size: 13px;
    color: #999;
    font-style: italic;
}

.emoji-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin-top: 12px;
}

.emoji-tag {
    background: #f1f3f5;
    color: #495057;
    padding: 4px 8px;
    border-radius: 12px;
    font-size: 12px;
    font-weight: 500;
}

.copy-indicator {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(40, 167, 69, 0.9);
    color: white;
    padding: 8px 16px;
    border-radius: 6px;
    font-size: 14px;
    font-weight: 600;
    opacity: 0;
    transition: opacity 0.3s ease;
    pointer-events: none;
    z-index: 10;
}

.emoji-desc-item {
    position: relative;
}

.emoji-desc-item.copied .copy-indicator {
    opacity: 1;
}

@media (max-width: 768px) {
    .search-with-random {
        gap: 8px;
    }
    
    .random-dice-btn {
        font-size: 14px;
        padding: 10px 12px;
        height: 46px;
        gap: 4px;
    }
    
    .emoji-desc-item {
        padding: 15px;
    }
    
    .emoji-large {
        font-size: 28px;
        min-width: 44px;
        min-height: 44px;
    }
    
    .emoji-name {
        font-size: 16px;
    }
    
    .emoji-description {
        font-size: 13px;
    }
    
    .emoji-usage {
        font-size: 12px;
    }
}

@media (max-width: 480px) {
    .search-with-random {
        gap: 6px;
    }
    
    .random-dice-btn {
        font-size: 13px;
        padding: 8px 10px;
        height: 42px;
        gap: 3px;
    }
    
    .emoji-desc-header {
        gap: 12px;
    }
    
    .emoji-large {
        font-size: 24px;
        min-width: 40px;
        min-height: 40px;
    }
    
    .emoji-name {
        font-size: 15px;
    }
}

/* ëœë¤ ì´ëª¨ì§€ ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ */
.random-emoji-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 20px;
    padding: 20px;
}

.random-emoji-box {
    width: 300px;
    height: 300px;
    background: #f8f9fa;
    border: 2px solid #e9ecef;
    border-radius: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.random-emoji-box:hover {
    transform: translateY(-3px);
    background: #e9ecef;
    border-color: #007bff;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
}

.random-emoji-display {
    font-size: 80px;
    line-height: 1;
    margin-bottom: 20px;
    text-align: center;
    filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.1));
}

.random-emoji-text {
    text-align: center;
    color: #333;
}

.random-title {
    font-size: 20px;
    font-weight: 700;
    margin-bottom: 8px;
    color: #333;
}

.random-subtitle {
    font-size: 14px;
    color: #666;
    font-weight: 500;
}

.random-info {
    text-align: center;
    color: #666;
    max-width: 400px;
    line-height: 1.6;
}

.random-info p {
    margin: 0 0 10px 0;
    font-size: 15px;
}

.random-info p:last-child {
    margin-bottom: 0;
    color: #007bff;
    font-weight: 500;
}

.copy-indicator {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(40, 167, 69, 0.95);
    color: white;
    padding: 12px 20px;
    border-radius: 8px;
    font-size: 16px;
    font-weight: 600;
    opacity: 0;
    transition: opacity 0.3s ease;
    pointer-events: none;
    z-index: 10;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

.random-emoji-box.copied .copy-indicator {
    opacity: 1;
}

@media (max-width: 768px) {
    .random-emoji-box {
        width: 250px;
        height: 250px;
    }
    
    .random-emoji-display {
        font-size: 65px;
        margin-bottom: 15px;
    }
    
    .random-title {
        font-size: 18px;
    }
    
    .random-subtitle {
        font-size: 13px;
    }
    
    .random-info p {
        font-size: 14px;
    }
}

@media (max-width: 480px) {
    .random-emoji-container {
        padding: 15px;
        gap: 15px;
    }
    
    .random-emoji-box {
        width: 200px;
        height: 200px;
        border-radius: 15px;
    }
    
    .random-emoji-display {
        font-size: 50px;
        margin-bottom: 12px;
    }
    
    .random-title {
        font-size: 16px;
        margin-bottom: 6px;
    }
    
    .random-subtitle {
        font-size: 12px;
    }
    
    .random-info {
        max-width: 300px;
    }
    
    .random-info p {
        font-size: 13px;
    }
}
</style>

<script>
// ì´ëª¨ì§€ ì„¤ëª… ë°ì´í„°
const emojiDescriptionData = {
    popular: [
        {emoji: 'ğŸ˜€', name: 'í™œì§ ì›ƒëŠ” ì–¼êµ´', description: 'ê¸°ì˜ê³  í–‰ë³µí•œ ê¸°ë¶„ì„ í‘œí˜„í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ê¸°ë³¸ì ì¸ ì›ƒëŠ” ì´ëª¨ì§€ì…ë‹ˆë‹¤.', usage: 'ì¢‹ì€ ì†Œì‹ì´ë‚˜ ê¸°ìœ ì¼ì´ ìˆì„ ë•Œ', tags: ['ì›ƒìŒ', 'í–‰ë³µ', 'ê¸°ì¨', 'ê¸ì •']},
        {emoji: 'ğŸ˜‚', name: 'ê¸°ì¨ì˜ ëˆˆë¬¼', description: 'ë„ˆë¬´ ì›ƒê²¨ì„œ ëˆˆë¬¼ì´ ë‚  ì •ë„ë¡œ ì›ƒì„ ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.', usage: 'ë§¤ìš° ì¬ë¯¸ìˆëŠ” ìƒí™©ì´ë‚˜ ë†ë‹´ì—', tags: ['ì›ƒìŒ', 'ì¬ë°ŒìŒ', 'ëˆˆë¬¼', 'ê·¹ì›ƒ']},
        {emoji: 'â¤ï¸', name: 'ë¹¨ê°„ í•˜íŠ¸', description: 'ì‚¬ë‘ê³¼ ì• ì •ì„ í‘œí˜„í•˜ëŠ” ê°€ì¥ ê¸°ë³¸ì ì¸ í•˜íŠ¸ ì´ëª¨ì§€ì…ë‹ˆë‹¤.', usage: 'ì‚¬ë‘í•˜ëŠ” ì‚¬ëŒì—ê²Œ ë§ˆìŒì„ ì „í•  ë•Œ', tags: ['ì‚¬ë‘', 'ì• ì •', 'í•˜íŠ¸', 'ë¡œë§¨ìŠ¤']},
        {emoji: 'ğŸ‘', name: 'ì¢‹ì•„ìš”', description: 'ë™ì˜í•˜ê±°ë‚˜ ê¸ì •ì ì¸ ë°˜ì‘ì„ í‘œí˜„í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.', usage: 'ëˆ„êµ°ê°€ì˜ ì˜ê²¬ì— ë™ì˜í•˜ê±°ë‚˜ ê²©ë ¤í•  ë•Œ', tags: ['ì¢‹ìŒ', 'ë™ì˜', 'ê¸ì •', 'ê²©ë ¤']},
        {emoji: 'ğŸ”¥', name: 'ë¶ˆê½ƒ', description: 'ëœ¨ê±°ìš´ ê´€ì‹¬ì´ë‚˜ ì¸ê¸°, ë©‹ì§„ ê²ƒì„ í‘œí˜„í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.', usage: 'íŠ¸ë Œë””í•˜ê±°ë‚˜ ì¸ê¸° ìˆëŠ” ê²ƒì„ ê°•ì¡°í•  ë•Œ', tags: ['í•«', 'ì¸ê¸°', 'ë©‹ì§', 'íŠ¸ë Œë“œ']},
    ],
    people: [
        {emoji: 'ğŸ˜Š', name: 'ë¯¸ì†Œ ì§“ëŠ” ì–¼êµ´', description: 'ë¶€ë“œëŸ½ê³  ì˜¨í™”í•œ ë¯¸ì†Œë¥¼ í‘œí˜„í•˜ëŠ” ì´ëª¨ì§€ì…ë‹ˆë‹¤.', usage: 'ì¹œê·¼í•¨ì´ë‚˜ ê°ì‚¬í•¨ì„ í‘œí˜„í•  ë•Œ', tags: ['ë¯¸ì†Œ', 'ì¹œê·¼', 'ì˜¨í™”', 'ê°ì‚¬']},
        {emoji: 'ğŸ˜', name: 'í•˜íŠ¸ ëˆˆ', description: 'ë¬´ì–¸ê°€ì— ë°˜í–ˆê±°ë‚˜ ë§¤ìš° ì¢‹ì•„í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.', usage: 'ì¢‹ì•„í•˜ëŠ” ê²ƒì„ ë³´ê±°ë‚˜ ë°˜í–ˆì„ ë•Œ', tags: ['ë°˜í•¨', 'ì¢‹ì•„í•¨', 'ì‚¬ë‘', 'ë§¤ë ¥']},
        {emoji: 'ğŸ˜­', name: 'í° ì†Œë¦¬ë¡œ ìš°ëŠ” ì–¼êµ´', description: 'ë§¤ìš° ìŠ¬í”„ê±°ë‚˜ ê°ë™ë°›ì•˜ì„ ë•Œ ì‚¬ìš©í•˜ëŠ” ì´ëª¨ì§€ì…ë‹ˆë‹¤.', usage: 'ë§¤ìš° ìŠ¬í”ˆ ìƒí™©ì´ë‚˜ ê°ë™ì ì¸ ìˆœê°„ì—', tags: ['ìš¸ìŒ', 'ìŠ¬í””', 'ê°ë™', 'ëˆˆë¬¼']},
        {emoji: 'ğŸ˜´', name: 'ì ìëŠ” ì–¼êµ´', description: 'ì¡¸ë¦¬ê±°ë‚˜ ì ë“¤ì—ˆì„ ë•Œ ì‚¬ìš©í•˜ëŠ” ì´ëª¨ì§€ì…ë‹ˆë‹¤.', usage: 'ì ì´ ì˜¬ ë•Œë‚˜ ì§€ì³¤ì„ ë•Œ', tags: ['ì ', 'ì¡¸ë¦¼', 'í”¼ê³¤', 'ìˆ˜ë©´']},
    ],
    nature: [
        {emoji: 'ğŸ¶', name: 'ê°•ì•„ì§€ ì–¼êµ´', description: 'ê·€ì—½ê³  ì¶©ì„±ìŠ¤ëŸ¬ìš´ ê°•ì•„ì§€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì´ëª¨ì§€ì…ë‹ˆë‹¤.', usage: 'ì• ì™„ë™ë¬¼ì´ë‚˜ ê·€ì—¬ìš´ ê²ƒì„ í‘œí˜„í•  ë•Œ', tags: ['ê°•ì•„ì§€', 'ê·€ì—¬ì›€', 'ì• ì™„ë™ë¬¼', 'ì¶©ì„±']},
        {emoji: 'ğŸŒ¸', name: 'ë²šê½ƒ', description: 'ë´„ê³¼ ì•„ë¦„ë‹¤ì›€ì„ ìƒì§•í•˜ëŠ” ë²šê½ƒ ì´ëª¨ì§€ì…ë‹ˆë‹¤.', usage: 'ë´„ì² ì´ë‚˜ ì•„ë¦„ë‹¤ìš´ ìˆœê°„ì„ í‘œí˜„í•  ë•Œ', tags: ['ë´„', 'ê½ƒ', 'ì•„ë¦„ë‹¤ì›€', 'ê³„ì ˆ']},
        {emoji: 'ğŸŒŸ', name: 'ë³„', description: 'íŠ¹ë³„í•¨ì´ë‚˜ ìš°ìˆ˜í•¨ì„ ë‚˜íƒ€ë‚´ëŠ” ë³„ ëª¨ì–‘ ì´ëª¨ì§€ì…ë‹ˆë‹¤.', usage: 'ë­”ê°€ íŠ¹ë³„í•˜ê±°ë‚˜ í›Œë¥­í•  ë•Œ', tags: ['íŠ¹ë³„', 'ë³„', 'ìš°ìˆ˜', 'ë°˜ì§']},
    ],
    food: [
        {emoji: 'ğŸ•', name: 'í”¼ì', description: 'ì¸ê¸° ìˆëŠ” íŒ¨ìŠ¤íŠ¸í‘¸ë“œì¸ í”¼ìë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì´ëª¨ì§€ì…ë‹ˆë‹¤.', usage: 'ìŒì‹ ì–˜ê¸°ë‚˜ íŒŒí‹° ë¶„ìœ„ê¸°ë¥¼ ì—°ì¶œí•  ë•Œ', tags: ['í”¼ì', 'ìŒì‹', 'íŒŒí‹°', 'ë§›ìˆìŒ']},
        {emoji: 'ğŸ°', name: 'ì¼€ì´í¬', description: 'ìƒì¼ì´ë‚˜ ì¶•í•˜í•  ì¼ì´ ìˆì„ ë•Œ ì‚¬ìš©í•˜ëŠ” ì¼€ì´í¬ ì´ëª¨ì§€ì…ë‹ˆë‹¤.', usage: 'ìƒì¼ì´ë‚˜ ê¸°ë…ì¼ ì¶•í•˜í•  ë•Œ', tags: ['ì¼€ì´í¬', 'ìƒì¼', 'ì¶•í•˜', 'ë‹¬ì½¤']},
        {emoji: 'â˜•', name: 'ì»¤í”¼', description: 'ì»¤í”¼ë‚˜ ë”°ëœ»í•œ ìŒë£Œë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì´ëª¨ì§€ì…ë‹ˆë‹¤.', usage: 'ì•„ì¹¨ì´ë‚˜ íœ´ì‹ ì‹œê°„ì„ í‘œí˜„í•  ë•Œ', tags: ['ì»¤í”¼', 'ì•„ì¹¨', 'íœ´ì‹', 'ë”°ëœ»']},
    ],
    symbols: [
        {emoji: 'âœ¨', name: 'ë°˜ì§ì„', description: 'ë§ˆë²•ê°™ê±°ë‚˜ íŠ¹ë³„í•œ ìˆœê°„ì„ í‘œí˜„í•˜ëŠ” ë°˜ì§ì´ëŠ” ë³„ë“¤ì…ë‹ˆë‹¤.', usage: 'ë­”ê°€ ë§ˆë²•ê°™ê±°ë‚˜ íŠ¹ë³„í•  ë•Œ', tags: ['ë°˜ì§', 'ë§ˆë²•', 'íŠ¹ë³„', 'ë¹›']},
        {emoji: 'ğŸ’¯', name: 'ë°±ì ', description: 'ì™„ë²½í•˜ê±°ë‚˜ ìµœê³ ì„ì„ í‘œí˜„í•˜ëŠ” 100ì  ì´ëª¨ì§€ì…ë‹ˆë‹¤.', usage: 'ì™„ë²½í•˜ê±°ë‚˜ ìµœê³ ì˜ ê²°ê³¼ë¥¼ ì–»ì—ˆì„ ë•Œ', tags: ['ì™„ë²½', 'ìµœê³ ', '100ì ', 'ì„±ê³µ']},
        {emoji: 'ğŸ‰', name: 'íŒŒí‹° í¬ë˜ì»¤', description: 'ì¶•í•˜í•˜ê±°ë‚˜ íŒŒí‹° ë¶„ìœ„ê¸°ë¥¼ ì—°ì¶œí•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.', usage: 'ì„±ê³µì´ë‚˜ ì¢‹ì€ ì¼ì„ ì¶•í•˜í•  ë•Œ', tags: ['ì¶•í•˜', 'íŒŒí‹°', 'ì„±ê³µ', 'ê¸°ë…']},
    ]
};

class DescriptionManager {
    constructor() {
        this.allDescriptions = this.getAllDescriptions();
        this.init();
    }

    init() {
        this.bindEvents();
        this.renderDescriptions(this.allDescriptions);
    }

    bindEvents() {
        console.log('ì´ë²¤íŠ¸ ë°”ì¸ë”© ì‹œì‘');
        
        // ê²€ìƒ‰ ê¸°ëŠ¥
        const searchInput = document.getElementById('descriptionSearchInput');
        console.log('ê²€ìƒ‰ ì…ë ¥ì°½:', searchInput);
        if (searchInput) {
            searchInput.addEventListener('input', (e) => {
                this.handleSearch(e.target.value);
            });
        }

        // ëœë¤ ì£¼ì‚¬ìœ„ ë²„íŠ¼
        const randomBtn = document.getElementById('randomDiceBtn');
        console.log('ëœë¤ ë²„íŠ¼:', randomBtn);
        if (randomBtn) {
            console.log('ëœë¤ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€');
            randomBtn.addEventListener('click', (e) => {
                console.log('ëœë¤ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ ë°œìƒ!');
                e.preventDefault();
                this.handleRandomClick();
            });
            
            // ì¶”ê°€ í…ŒìŠ¤íŠ¸ìš© - onclickë„ ì„¤ì •
            randomBtn.onclick = () => {
                console.log('onclickìœ¼ë¡œ ëœë¤ ë²„íŠ¼ í´ë¦­ë¨');
                this.handleRandomClick();
            };
        } else {
            console.error('ëœë¤ ë²„íŠ¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ!');
        }
    }

    getAllDescriptions() {
        const all = [];
        for (const category in emojiDescriptionData) {
            all.push(...emojiDescriptionData[category].map(item => ({...item, category})));
        }
        return all;
    }

    handleSearch(searchTerm) {
        if (!searchTerm.trim()) {
            this.renderDescriptions(this.allDescriptions);
            return;
        }

        const filtered = this.allDescriptions.filter(item => {
            const searchLower = searchTerm.toLowerCase();
            return item.name.toLowerCase().includes(searchLower) ||
                   item.description.toLowerCase().includes(searchLower) ||
                   item.tags.some(tag => tag.toLowerCase().includes(searchLower)) ||
                   item.emoji.includes(searchTerm);
        });

        this.renderDescriptions(filtered);
    }

    handleRandomClick() {
        console.log('ëœë¤ ë²„íŠ¼ í´ë¦­ë¨'); // ë””ë²„ê¹…ìš©
        
        const randomBtn = document.getElementById('randomDiceBtn');
        const searchInput = document.getElementById('descriptionSearchInput');
        
        // ì£¼ì‚¬ìœ„ íšŒì „ ì• ë‹ˆë©”ì´ì…˜
        if (randomBtn) {
            randomBtn.classList.add('spinning');
            setTimeout(() => {
                randomBtn.classList.remove('spinning');
            }, 500);
        }

        // í„°ì¹˜ í”¼ë“œë°±
        if (navigator.vibrate) {
            navigator.vibrate([50, 50, 100]);
        }

        // emoji-data.jsì—ì„œ ëœë¤ ì´ëª¨ì§€ ì„ íƒ
        const randomEmoji = this.getRandomEmojiFromData();
        console.log('ì„ íƒëœ ëœë¤ ì´ëª¨ì§€:', randomEmoji); // ë””ë²„ê¹…ìš©
        
        // ê²€ìƒ‰ì°½ ë¹„ìš°ê¸°
        if (searchInput) {
            searchInput.value = '';
        }
        
        // ëœë¤ ì´ëª¨ì§€ í‘œì‹œ (ì„¤ëª… ì—†ëŠ” í˜•íƒœ)
        this.renderRandomEmoji(randomEmoji);
        
        // ëœë¤ ì´ëª¨ì§€ ì•Œë¦¼
        setTimeout(() => {
            showCopyNotificationFromDesc(`ğŸ² ëœë¤ ì´ëª¨ì§€: ${randomEmoji}!`);
        }, 300);
    }

    getRandomEmojiFromData() {
        console.log('window.emojiData ìƒíƒœ:', window.emojiData); // ë””ë²„ê¹…ìš©
        
        // emoji-data.jsì˜ ëª¨ë“  ì´ëª¨ì§€ë¥¼ í•˜ë‚˜ì˜ ë°°ì—´ë¡œ í•©ì¹˜ê¸°
        if (!window.emojiData) {
            console.log('emoji-data.js ì—†ìŒ, ê¸°ë³¸ ë°ì´í„° ì‚¬ìš©');
            // emoji-data.jsê°€ ë¡œë“œë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ ë°ì´í„° ì‚¬ìš©
            const randomIndex = Math.floor(Math.random() * this.allDescriptions.length);
            return this.allDescriptions[randomIndex].emoji;
        }

        const allEmojis = [];
        for (const category in window.emojiData) {
            allEmojis.push(...window.emojiData[category]);
        }

        console.log('ì „ì²´ ì´ëª¨ì§€ ê°œìˆ˜:', allEmojis.length); // ë””ë²„ê¹…ìš©

        // ëœë¤ ì„ íƒ
        const randomIndex = Math.floor(Math.random() * allEmojis.length);
        return allEmojis[randomIndex];
    }

    renderRandomEmoji(emoji) {
        const container = document.getElementById('emojiDescriptions');
        if (!container) return;

        // ëœë¤ ì´ëª¨ì§€ ì „ìš© ì¹´ë“œ ë Œë”ë§ (300px ì •ì‚¬ê°í˜•, 80px ì´ëª¨ì§€)
        container.innerHTML = `
            <div class="random-emoji-container">
                <div class="random-emoji-box" onclick="copyEmojiFromDesc('${emoji}', this)">
                    <div class="random-emoji-display">${emoji}</div>
                    <div class="random-emoji-text">
                        <div class="random-title">ğŸ² ëœë¤ ì´ëª¨ì§€</div>
                        <div class="random-subtitle">í´ë¦­í•´ì„œ ë³µì‚¬í•˜ì„¸ìš”!</div>
                    </div>
                    <div class="copy-indicator">ë³µì‚¬ë¨!</div>
                </div>
                <div class="random-info">
                    <p>ì´ ì´ëª¨ì§€ëŠ” ${this.getEmojiCount()}ê°œì˜ ì´ëª¨ì§€ ì¤‘ì—ì„œ ëœë¤ìœ¼ë¡œ ì„ íƒë˜ì—ˆìŠµë‹ˆë‹¤!</p>
                    <p>ë‹¤ì‹œ ğŸ² ëœë¤ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ìƒˆë¡œìš´ ì´ëª¨ì§€ë¥¼ ë§Œë‚  ìˆ˜ ìˆì–´ìš”.</p>
                </div>
            </div>
        `;
    }

    getEmojiCount() {
        if (!window.emojiData) return '3000+';
        
        let count = 0;
        for (const category in window.emojiData) {
            count += window.emojiData[category].length;
        }
        return count.toLocaleString();
    }

    renderDescriptions(descriptions) {
        const container = document.getElementById('emojiDescriptions');
        if (!container) return;

        if (descriptions.length === 0) {
            container.innerHTML = '<div style="text-align: center; color: #999; padding: 40px;">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</div>';
            return;
        }

        container.innerHTML = descriptions.map(item => `
            <div class="emoji-desc-item" onclick="copyEmojiFromDesc('${item.emoji}', this)">
                <div class="emoji-desc-header">
                    <div class="emoji-large">${item.emoji}</div>
                    <div class="emoji-info">
                        <div class="emoji-name">${item.name}</div>
                        <div class="emoji-description">${item.description}</div>
                        <div class="emoji-usage">${item.usage}</div>
                    </div>
                </div>
                <div class="emoji-tags">
                    ${item.tags.map(tag => `<span class="emoji-tag">${tag}</span>`).join('')}
                </div>
                <div class="copy-indicator">ë³µì‚¬ë¨!</div>
            </div>
        `).join('');
    }
}

// ì´ëª¨ì§€ ë³µì‚¬ í•¨ìˆ˜
function copyEmojiFromDesc(emoji, element) {
    // í„°ì¹˜ í”¼ë“œë°±
    if (navigator.vibrate) {
        navigator.vibrate(50);
    }
    
    navigator.clipboard.writeText(emoji).then(() => {
        // ë³µì‚¬ í‘œì‹œ
        element.classList.add('copied');
        setTimeout(() => {
            element.classList.remove('copied');
        }, 1000);
        
        // í”Œë¡œíŒ… ë°•ìŠ¤ì— ì¶”ê°€
        addToCollectorFromDesc(emoji);
        
        // ì•Œë¦¼ í‘œì‹œ
        showCopyNotificationFromDesc(emoji);
    }).catch(() => {
        // ëŒ€ì²´ ë³µì‚¬ ë°©ë²•
        fallbackCopyTextToClipboard(emoji);
        element.classList.add('copied');
        setTimeout(() => {
            element.classList.remove('copied');
        }, 1000);
        addToCollectorFromDesc(emoji);
        showCopyNotificationFromDesc(emoji);
    });
}

function addToCollectorFromDesc(emoji) {
    const collector = document.getElementById('emojiCollector');
    if (!collector) return;
    
    if (collector.hasAttribute('data-placeholder')) {
        collector.textContent = emoji;
        collector.removeAttribute('data-placeholder');
    } else {
        collector.textContent += emoji;
    }
}

function showCopyNotificationFromDesc(copiedEmoji) {
    const notification = document.getElementById('copyNotification');
    if (!notification) return;
    
    notification.textContent = `ì´ëª¨ì§€ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤! ${copiedEmoji}`;
    notification.classList.add('show');
    
    setTimeout(() => {
        notification.classList.remove('show');
    }, 2000);
}

function fallbackCopyTextToClipboard(text) {
    const textArea = document.createElement("textarea");
    textArea.value = text;
    textArea.style.top = "0";
    textArea.style.left = "0";
    textArea.style.position = "fixed";
    document.body.appendChild(textArea);
    textArea.focus();
    textArea.select();
    
    try {
        document.execCommand('copy');
    } catch (err) {
        console.error('ë³µì‚¬ ì‹¤íŒ¨', err);
    }
    
    document.body.removeChild(textArea);
}

// ì „ì—­ ë³€ìˆ˜ë¡œ ë§¤ë‹ˆì € ì¸ìŠ¤í„´ìŠ¤ ì €ì¥
let descriptionManager;

// í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
document.addEventListener('DOMContentLoaded', () => {
    console.log('DOMContentLoaded - ì´ˆê¸°í™” ì‹œì‘');
    descriptionManager = new DescriptionManager();
});

// ì¦‰ì‹œ ì´ˆê¸°í™” (ì´ë¯¸ DOMì´ ë¡œë“œëœ ê²½ìš°)
if (document.readyState !== 'loading') {
    console.log('DOM ì´ë¯¸ ë¡œë“œë¨ - ì¦‰ì‹œ ì´ˆê¸°í™”');
    descriptionManager = new DescriptionManager();
}

// ì „ì—­ ëœë¤ í•¨ìˆ˜ (ë°±ì—…ìš©)
function handleRandomClickGlobal() {
    console.log('ì „ì—­ ëœë¤ í•¨ìˆ˜ í˜¸ì¶œë¨');
    if (descriptionManager) {
        descriptionManager.handleRandomClick();
    } else {
        console.error('DescriptionManagerê°€ ì´ˆê¸°í™”ë˜ì§€ ì•ŠìŒ');
    }
}
</script>